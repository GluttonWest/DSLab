#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct node
{
    char name[20];
    struct node *next;
} NODE;

/* Insert node at end of circular list */
NODE *ins_last(NODE *last, char name[])
{
    NODE *newnode = (NODE *)malloc(sizeof(NODE));
    strcpy(newnode->name, name);

    if (last == NULL)
    {
        newnode->next = newnode;   // first node points to itself
        return newnode;
    }
    newnode->next = last->next;
    last->next = newnode;
    return newnode;
}

/* Delete node next to last (Josephus elimination) */
NODE *del_node(NODE *last)
{
    NODE *temp = last->next;
    printf("%s ", temp->name);
    last->next = temp->next;
    free(temp);
    return last;
}

int main()
{
    NODE *last = NULL;
    char name[20];
    int n, i;

    printf("Enter the value of n: ");
    scanf("%d", &n);

    printf("Enter the names of the soldiers (type end to stop):\n");
    scanf("%19s", name);

    while (strcmp(name, "end") != 0)
    {
        last = ins_last(last, name);
        scanf("%19s", name);
    }

    if (last == NULL)
    {
        printf("Empty list\n");
        return 0;
    }

    printf("\nOrder of elimination: ");
    while (last->next != last)
    {
        for (i = 1; i < n; i++)
            last = last->next;

        last = del_node(last);
    }

    printf("\nSurviving soldier: %s\n", last->name);
    return 0;
}

